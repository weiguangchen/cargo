"use strict";const e=require("../../../common/vendor.js"),t=require("../../../utils/dict.js"),o=require("../../../api/index.js");if(!Array){(e.resolveComponent("uv-image")+e.resolveComponent("my-price")+e.resolveComponent("uv-line")+e.resolveComponent("uv-button")+e.resolveComponent("my-confirm"))()}Math||((()=>"../../../uni_modules/uv-image/components/uv-image/uv-image.js")+(()=>"../../../components/my-price/my-price.js")+(()=>"../../../uni_modules/uv-line/components/uv-line/uv-line.js")+(()=>"../../../uni_modules/uv-button/components/uv-button/uv-button.js")+(()=>"../../../components/my-confirm/my-confirm.js"))();const r={__name:"item",props:{record:{default:()=>{},type:Object}},emits:["toDetail","success"],setup(r,{emit:c}){const n=c,i=r,a=e.computed((()=>{var e,t,o,r,c,n,a;const s=(null==(o=null==(t=null==(e=i.record)?void 0:e.MatList)?void 0:t[0])?void 0:o.MaterialName)??"";return(null==(c=null==(r=i.record)?void 0:r.MatList)?void 0:c.length)<=1?s:`${s} 等 ${null==(a=null==(n=i.record)?void 0:n.MatList)?void 0:a.length} 物料`})),s=e.computed((()=>{var e,o;return(null==(o=null==(e=t.ManifestStatusOptions)?void 0:e.find((e=>e.value==i.record.Status)))?void 0:o.name)??""}));function l(){e.index.navigateTo({url:`/pages/manifestDetail/manifestDetail?assignId=${i.record.Id}&supplyId=${i.record.Supply}`})}const d=e.ref();async function u(){d.value.confirm({title:"确定完结货单？",content:"完结后将不再派发新的运单任务，当前进行中的运单任务不受影响",cancelText:"再想想",confirmText:"完结货单",asyncClose:!0,async confirm(){try{await o.SetAssignStatusChg({optType:"end",assignId:i.record.Id,supplyId:i.record.Supply}),e.index.showToast({title:"操作成功",icon:"none",complete(){setTimeout((()=>{n("success")}),1500)}}),d.value.close()}catch(t){e.index.showToast({icon:"none",title:t.data}),d.value.closeLoading()}}})}function m(){d.value.confirm({title:"确定暂停货单？",content:"暂停后将不再派发新的运单任务，后续可随时继续派单，当前进行中的运单任务不受影响",cancelText:"再想想",confirmText:"暂停货单",confirmBgColor:"var(--main-color)",asyncClose:!0,async confirm(){try{await o.SetAssignStatusChg({optType:"pause",assignId:i.record.Id,supplyId:i.record.Supply}),e.index.showToast({title:"操作成功",icon:"none",complete(){setTimeout((()=>{n("success")}),1500)}}),d.value.close()}catch(t){e.index.showToast({icon:"none",title:t.data}),d.value.closeLoading()}}})}function p(){d.value.confirm({title:"确定继续派单？",content:"将继续派发运单任务",cancelText:"再想想",confirmText:"继续派单",confirmBgColor:"var(--main-color)",asyncClose:!0,async confirm(){try{await o.ResetAssignStatusChg({assignId:i.record.Id,supplyId:i.record.Supply}),await e.index.showToast({title:"操作成功",icon:"none",complete(){setTimeout((()=>{n("success")}),1500)}}),d.value.close()}catch(t){e.index.showToast({icon:"none",title:t.data}),d.value.closeLoading()}}})}return(t,o)=>e.e({a:e.t(s.value),b:"1"===r.record.Status?1:"",c:["2","3"].includes(r.record.Status)?1:"",d:["4","5"].includes(r.record.Status)?1:"",e:e.t(a.value),f:!!r.record.EstimateCarWeight&&!!r.record.EstimateCarTimes},r.record.EstimateCarWeight&&r.record.EstimateCarTimes?{g:e.t(r.record.RealCarWeight||0),h:e.t(r.record.EstimateCarWeight||0),i:e.t(r.record.RealCarTimes||0),j:e.t(r.record.EstimateCarTimes||0)}:r.record.EstimateCarTimes?{l:e.t(r.record.RealCarTimes||0),m:e.t(r.record.EstimateCarTimes||0)}:r.record.EstimateCarWeight?{o:e.t(r.record.RealCarWeight||0),p:e.t(r.record.EstimateCarWeight||0)}:{},{k:!!r.record.EstimateCarTimes,n:!!r.record.EstimateCarWeight,q:r.record.SupEnt},r.record.SupEnt?{r:e.f(3,((e,t,o)=>({}))),s:e.p({src:"/static/images/dot1.png",width:"16rpx",height:"16rpx",duration:0,"custom-style":{marginRight:"16rpx"}}),t:e.t(r.record.SupEnt?r.record.SupEnt.City:""),v:e.t(r.record.SupEnt?r.record.SupEnt.SupplierName:"")}:{},{w:r.record.UnloadEnt},r.record.UnloadEnt?{x:e.p({src:"/static/images/dot2.png",width:"16rpx",height:"16rpx",duration:0,"custom-style":{marginRight:"16rpx"}}),y:e.t(r.record.UnloadEnt?r.record.UnloadEnt.City:""),z:e.t(r.record.UnloadEnt?r.record.UnloadEnt.PlaceName:"")}:{},{A:!!r.record.RealCarAmount},r.record.RealCarAmount?{B:e.p({color:"var(--red-color)",price:r.record.RealCarAmount}),C:e.p({direction:"col",color:"#C8D4DF",length:"26rpx",margin:"0 20rpx 0 20rpx"})}:{},{D:e.t(r.record.EstimateCarAmount||0),E:["1","2","3","4"].includes(r.record.Status)},["1","2","3","4"].includes(r.record.Status)?e.e({F:e.p({color:"var(--divider)",margin:"24rpx 0"}),G:"1"===r.record.Status},"1"===r.record.Status?{H:e.o(u),I:e.p({shape:"circle",text:"完结货单",color:"var(--page-bg)",customTextStyle:{color:"var(--content-color)",fontSize:"26rpx"},customStyle:{height:"32px"}}),J:e.o((()=>{})),K:e.o(m),L:e.p({shape:"circle",text:"暂停货单",color:"var(--page-bg)",customTextStyle:{color:"var(--content-color)",fontSize:"26rpx"},customStyle:{height:"32px"}}),M:e.o((()=>{}))}:["2","3"].includes(r.record.Status)?{O:e.o(u),P:e.p({shape:"circle",text:"完结货单",color:"var(--page-bg)",customTextStyle:{color:"var(--content-color)",fontSize:"26rpx"},customStyle:{height:"32px"}}),Q:e.o((()=>{})),R:e.o(p),S:e.p({shape:"circle",text:"继续派单",color:"linear-gradient( 270deg, #31CE57 0%, #07B130 100%);",customTextStyle:{fontSize:"26rpx"},customStyle:{height:"32px"}}),T:e.o((()=>{}))}:["4"].includes(r.record.Status)?{V:e.o(p),W:e.p({shape:"circle",text:"继续派单",color:"linear-gradient( 270deg, #31CE57 0%, #07B130 100%);",customTextStyle:{fontSize:"26rpx"},customStyle:{height:"32px"}}),X:e.o((()=>{}))}:{},{N:["2","3"].includes(r.record.Status),U:["4"].includes(r.record.Status)}):{},{Y:e.o(l),Z:e.sr(d,"55161eba-10",{k:"confirm"})})}},c=e._export_sfc(r,[["__scopeId","data-v-55161eba"]]);wx.createComponent(c);
