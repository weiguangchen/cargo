"use strict";const e=require("../../common/vendor.js"),o=require("../../api/index.js");if(!Array){(e.resolveComponent("uv-search")+e.resolveComponent("uv-navbar")+e.resolveComponent("uv-tabs")+e.resolveComponent("uv-image")+e.resolveComponent("uv-load-more")+e.resolveComponent("my-empty"))()}Math||((()=>"../../uni_modules/uv-search/components/uv-search/uv-search.js")+a+(()=>"../../uni_modules/uv-navbar/components/uv-navbar/uv-navbar.js")+(()=>"../../uni_modules/uv-tabs/components/uv-tabs/uv-tabs.js")+(()=>"../../uni_modules/uv-image/components/uv-image/uv-image.js")+n+(()=>"../../uni_modules/uv-load-more/components/uv-load-more/uv-load-more.js")+(()=>"../../components/my-empty/my-empty.js"))();const n=()=>"./components/item.js",a=()=>"./components/FilterDrawer.js",l={__name:"manifestList",setup(n){const a=e.ref(!1);function l(){e.index.navigateBack()}const t=e.ref(0);e.onMounted((()=>{let o=e.index.getMenuButtonBoundingClientRect();console.log("menuButtonInfo",o),t.value=o.width+20}));const u=e.ref(""),r=e.ref([{name:"全部",value:""},{name:"进行中",value:10},{name:"已暂停",value:3},{name:"已完结",value:5}]);function s({name:e,index:o}){var n,a;console.log(o,e),u.value=(null==(a=null==(n=r.value)?void 0:n.find((o=>o.name===e)))?void 0:a.value)??"",x()}const v=e.ref(),i=e.ref(!1),c=e.ref(!1);function d(e){console.log("changeFilter",e),c.value=!0,i.value=e.isFilter,g.value=e.params,x()}const m=e.ref(""),p=e.ref(!1);function f(){c.value=!0,p.value=!!m.value,x()}const h=e.ref([]),g=e.ref({}),b=e.ref(0);async function x(){try{e.index.showLoading();const{dateMode:n,date:a,...l}=g.value,t=await o.GetAssignCarListWithCount({status:u.value,keyWord:m.value,...l});h.value=t.list,b.value=t.cnt,e.index.hideLoading()}catch(n){e.index.hideLoading(),e.index.showToast({title:n.data,icon:"none"})}finally{c.value=!1}}function y(){m.value="",p.value=!1,v.value.reset()}return e.onShow((()=>{x()})),(o,n)=>e.e({a:"overflow:"+(a.value?"hidden":"visible"),b:e.o(f),c:e.o(f),d:e.o((e=>m.value=e)),e:e.p({placeholder:"搜索货单号、车牌号",showAction:!1,modelValue:m.value}),f:e.sr(v,"767cdad5-2,767cdad5-0",{k:"filter"}),g:e.o(d),h:`${t.value}px`,i:e.o(l),j:e.p({placeholder:!0}),k:e.o(s),l:e.p({activeStyle:{fontWeight:"bold",color:"var(--title-color)"},inactiveStyle:{color:"var(--sub-color)"},lineWidth:"32rpx",lineHeight:"8rpx",list:r.value,scrollable:!1,lineColor:"var(--main-color)",customStyle:{background:"#ffffff"}}),m:i.value&&!c.value||p.value&&!c.value},i.value&&!c.value||p.value&&!c.value?{n:e.t(b.value),o:e.p({duration:0,src:"/static/images/filter/redo.png",width:"28rpx",height:"28rpx","custom-style":{marginRight:"4rpx"}}),p:e.o(y)}:{},{q:h.value.length>0},h.value.length>0?{r:e.f(h.value,((o,n,a)=>({a:o.Id,b:e.o(x,o.Id),c:"767cdad5-5-"+a,d:e.p({record:o})}))),s:e.p({status:"nomore",color:"#B0BECC"})}:{})}};wx.createPage(l);
