"use strict";const e=require("../../../common/vendor.js"),a=require("../../../api/index.js");if(!Array){(e.resolveComponent("uv-image")+e.resolveComponent("uv-button")+e.resolveComponent("my-drawer"))()}Math||((()=>"../../../uni_modules/uv-image/components/uv-image/uv-image.js")+(()=>"../../../uni_modules/uv-button/components/uv-button/uv-button.js")+(()=>"../../../components/my-drawer/my-drawer.js"))();const t={options:{virtualHost:!0}},u=Object.assign(t,{__name:"SelectPlate",props:{modelValue:{default:()=>[]}},emits:["update:modelValue","change"],setup(t,{emit:u}){const{ctx:l}=e.getCurrentInstance(),o=t,n=u,r=e.ref([]);e.onMounted((()=>{!async function(){const e=(await a.GetOwnerCarMgr()).map((e=>({label:e.Carno,value:e.Id})));r.value=[...e]}()}));const s=e.ref([]),c=e.ref();e.watchEffect((()=>{s.value=o.modelValue?[...o.modelValue]:[];const e=r.value.filter((e=>o.modelValue.includes(e.value)));if(e.length>0)if(e.length>1){const[a,...t]=e;c.value=`${a.label} 等 ${e.length} 车牌`}else c.value=e[0].label;else c.value=""}));const i=e.ref();function v(){i.value.popup.open()}function p(){s.value=[],d()}function d(){n("update:modelValue",s.value),l.$uv.formValidate(l,"change"),i.value.popup.close()}return(a,t)=>({a:e.t(c.value||"不限制"),b:c.value?"":1,c:c.value?1:"",d:e.p({src:"/static/images/arrow.png",width:"24rpx",height:"24rpx","custom-style":{marginLeft:"6rpx"},duration:0}),e:e.o(v),f:e.f(r.value,((a,t,u)=>e.e({a:e.t(a.label),b:s.value.includes(a.value)},s.value.includes(a.value)?{c:"4ac0f77f-2-"+u+",4ac0f77f-1",d:e.p({src:"/static/images/check.png",duration:0,width:"32rpx",height:"32rpx"})}:{},{e:s.value.includes(a.value)?1:"",f:e.o((e=>function(e){const a=s.value.findIndex((a=>a===e.value));-1===a?s.value.push(e.value):s.value.splice(a,1)}(a)),a.value),g:a.value}))),g:e.p({text:"设为不限","custom-style":{height:"96rpx",borderRadius:"16rpx"}}),h:e.o(p),i:e.p({text:"确认所选",color:"linear-gradient( 270deg, #31CE57 0%, #07B130 100%);","custom-style":{height:"96rpx",borderRadius:"16rpx"}}),j:e.o(d),k:e.sr(i,"4ac0f77f-1",{k:"drawer"})})}}),l=e._export_sfc(u,[["__scopeId","data-v-4ac0f77f"]]);wx.createComponent(l);
