"use strict";const e=require("../../common/vendor.js"),o=require("../../api/index.js");if(!Array){(e.resolveComponent("uv-input")+e.resolveComponent("uv-form-item")+e.resolveComponent("uv-icon")+e.resolveComponent("uv-form")+e.resolveComponent("uv-button"))()}Math||((()=>"../../uni_modules/uv-input/components/uv-input/uv-input.js")+(()=>"../../uni_modules/uv-form/components/uv-form-item/uv-form-item.js")+(()=>"../../uni_modules/uv-icon/components/uv-icon/uv-icon.js")+(()=>"../../uni_modules/uv-form/components/uv-form/uv-form.js")+(()=>"../../uni_modules/uv-button/components/uv-button/uv-button.js"))();const r={__name:"addAddress",setup(r){e.onLoad((async e=>{const{unloadId:r}=e;if(a.Id=r,r)try{const e=await o.GetUnloadPlace({unloadId:r});console.log("res",e),a.Area={address:e.Address,province:e.Province,city:e.City,district:e.Distinct,latitude:e.Latitude,longitude:e.Logitude},a.Mobile=e.Mobile,a.Nickname=e.Nickname,a.Placename=e.Placename}catch{}}));const t=e.ref(null),a=e.reactive({Id:"",Placename:"",Area:{address:""},Nickname:"",Mobile:""}),n=e.ref({Placename:[{type:"string",required:!0,message:"请填写姓名",trigger:["blur","change"]},{message:"最多输入30个字",max:30,trigger:["blur","change"]}],"Area.address":{type:"string",required:!0,message:"请选择地址",trigger:["blur","change"]},Nickname:{type:"string",required:!0,message:"请填写昵称",trigger:["blur","change"]},Mobile:{type:"string",required:!0,message:"请填写手机号",trigger:["blur","change"]}});async function l(){try{const r=await e.index.chooseLocation();console.log("res",r);const{latitude:t,longitude:n}=r;if(t&&n?`${n},${t}`:""){const e=await o.GetLocationByJW({logitude:n,latitude:t});console.log("response",e);const{province:r,city:l,distinct:i,address:s}=e;let c={province:r,city:l,district:i,address:s,latitude:t,longitude:n};console.log(c),a.Area=c}}catch{}}const i=e.ref(!1);async function s(){if(await t.value.validate()){const{Area:{address:t,city:n,province:l,district:s,longitude:c,latitude:d},Placename:u,Mobile:m,Nickname:p,Id:v}=a,g={Id:v,Address:t,City:n,Province:l,Distinct:s,Placename:u,Logitude:c,Latitude:d,Mobile:m,Nickname:p};console.log("params",g);try{i.value=!0,o.UptUnloadPlace(g),e.index.$emit("addAddress"),e.index.navigateBack()}catch(r){console.log("err",r)}finally{i.value=!1}}}return(o,r)=>e.e({a:e.o((e=>a.Placename=e)),b:e.p({placeholder:"请输入",border:"none",maxlength:"30","laceholder-style":"color:var(--intr-color)",modelValue:a.Placename}),c:e.p({labelPosition:"left",label:"名称",prop:"Placename",borderBottom:!0}),d:a.Area.province},a.Area.province?{e:e.t(a.Area.province),f:e.t(a.Area.city),g:e.t(a.Area.district),h:e.p({labelPosition:"left",label:"地区",borderBottom:!0})}:{},{i:e.o((e=>a.Area.address=e)),j:e.p({placeholder:"请选择","placeholder-style":"color:var(--intr-color)",border:"none",readonly:!0,modelValue:a.Area.address}),k:e.p({name:"arrow-right","custom-style":{color:"var(--intr-color)"},size:"12"}),l:e.o(l),m:e.p({labelPosition:"left",label:"地址",prop:"Area.address"}),n:e.o((e=>a.Nickname=e)),o:e.p({placeholder:"请输入","placeholder-style":"color:var(--intr-color)",maxlength:"6",border:"none",modelValue:a.Nickname}),p:e.p({labelPosition:"left",label:"昵称",prop:"Nickname",borderBottom:!0}),q:e.o((e=>a.Mobile=e)),r:e.p({placeholder:"请输入","placeholder-style":"color:var(--intr-color)",maxlength:"11",border:"none",modelValue:a.Mobile}),s:e.p({labelPosition:"left",label:"电话",prop:"Mobile"}),t:e.sr(t,"5e5462d6-0",{k:"form"}),v:e.p({errorType:"toast",model:a,rules:n.value,"label-width":"88rpx"}),w:e.o(s),x:e.p({loading:i.value,text:"确认添加",color:"linear-gradient( 270deg, #31CE57 0%, #07B130 100%)"})})}};wx.createPage(r);
