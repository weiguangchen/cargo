"use strict";const e=require("../../common/vendor.js"),o=require("../../api/index.js");if(!Array){(e.resolveComponent("uv-search")+e.resolveComponent("uv-navbar")+e.resolveComponent("uv-tabs")+e.resolveComponent("uv-image")+e.resolveComponent("uv-load-more")+e.resolveComponent("my-empty"))()}Math||((()=>"../../uni_modules/uv-search/components/uv-search/uv-search.js")+a+(()=>"../../uni_modules/uv-navbar/components/uv-navbar/uv-navbar.js")+(()=>"../../uni_modules/uv-tabs/components/uv-tabs/uv-tabs.js")+(()=>"../../uni_modules/uv-image/components/uv-image/uv-image.js")+n+(()=>"../../uni_modules/uv-load-more/components/uv-load-more/uv-load-more.js")+(()=>"../../components/my-empty/my-empty.js"))();const n=()=>"./components/item.js",a=()=>"./components/FilterDrawer.js",l={__name:"waybill",setup(n){const a=e.ref(!1);function l(){e.index.navigateBack()}const t=e.ref(0);e.onMounted((()=>{let o=e.index.getMenuButtonBoundingClientRect();console.log("menuButtonInfo",o),t.value=o.width+20}));const u=e.ref(),r=e.ref([{name:"全部",value:""},{name:"已接单",value:"10"},{name:"已完成",value:"8"},{name:"已取消",value:"9"}]);function i({value:e}){u.value=e,y()}const s=e.ref(),v=e.ref(!1),c=e.ref(!1);function m(e){console.log("changeFilter",e),c.value=!0,v.value=e.isFilter,h.value=e.params,y()}const d=e.ref(""),p=e.ref(!1);function f(){c.value=!0,p.value=!!d.value,y()}e.onLoad((()=>{y()}));const g=e.ref([]),h=e.ref({}),b=e.ref(0);async function y(){const{dateMode:n,date:a,...l}=h.value;try{e.index.showLoading();const n=await o.GetOnwayOwnerWithCount({status:u.value,keyWord:d.value,...l});g.value=n.list,b.value=n.cnt,e.index.hideLoading()}catch(t){e.index.hideLoading(),e.index.showToast({title:t.data,icon:"none"})}finally{c.value=!1}}function w(){d.value="",p.value=!1,s.value.reset()}return(o,n)=>e.e({a:"overflow:"+(a.value?"hidden":"visible"),b:e.o(f),c:e.o(f),d:e.o((e=>d.value=e)),e:e.p({placeholder:"搜索运单号、车牌号",showAction:!1,modelValue:d.value}),f:e.sr(s,"36b49063-2,36b49063-0",{k:"filter"}),g:e.o(m),h:`${t.value}px`,i:e.o(l),j:e.p({placeholder:!0}),k:e.o(i),l:e.p({activeStyle:{fontWeight:"bold",color:"var(--title-color)"},inactiveStyle:{color:"var(--sub-color)"},lineWidth:"32rpx",lineHeight:"8rpx",list:r.value,scrollable:!1,lineColor:"var(--main-color)",customStyle:{background:"#ffffff"}}),m:v.value&&!c.value||p.value&&!c.value},v.value&&!c.value||p.value&&!c.value?{n:e.t(b.value),o:e.p({duration:0,src:"/static/images/filter/redo.png",width:"28rpx",height:"28rpx","custom-style":{marginRight:"4rpx"}}),p:e.o(w)}:{},{q:g.value.length>0},g.value.length>0?{r:e.f(g.value,((o,n,a)=>({a:o.OnwayId,b:e.o(y,o.OnwayId),c:"36b49063-5-"+a,d:e.p({record:o})}))),s:e.p({status:o.noMore?"nomore":o.loading?"loading":"loadmore",color:"#B0BECC"})}:{},{t:o.triggered,v:e.o(((...e)=>o.onRefresh&&o.onRefresh(...e))),w:e.o(((...e)=>o.onPulling&&o.onPulling(...e)))})}};wx.createPage(l);
