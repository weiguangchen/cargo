"use strict";const e=require("../../../common/vendor.js"),t=require("../../../api/index.js"),o=require("../../../utils/token.js");if(!Array){(e.resolveComponent("uv-image")+e.resolveComponent("my-plate")+e.resolveComponent("my-price")+e.resolveComponent("uv-line")+e.resolveComponent("uv-button")+e.resolveComponent("my-confirm"))()}Math||((()=>"../../../uni_modules/uv-image/components/uv-image/uv-image.js")+(()=>"../../../components/my-plate/my-plate.js")+(()=>"../../../components/my-price/my-price.js")+(()=>"../../../uni_modules/uv-line/components/uv-line/uv-line.js")+(()=>"../../../uni_modules/uv-button/components/uv-button/uv-button.js")+(()=>"../../../components/my-confirm/my-confirm.js"))();const r={__name:"item",props:{record:{default:()=>{},type:Object}},emits:["toDetail","success"],setup(r,{emit:n}){const c=r,d=n,i=e.computed((()=>{var e,t,o,r,n,d,i,s;return["0","1"].includes(null==(e=c.record)?void 0:e.Weightedstatus)?"待入厂":["2","3","4"].includes(null==(t=c.record)?void 0:t.Weightedstatus)||["2","3","4"].includes(null==(o=c.record)?void 0:o.Weightedstatus)?"已入厂":["5"].includes(null==(r=c.record)?void 0:r.Weightedstatus)?"装车中":["6"].includes(null==(n=c.record)?void 0:n.Weightedstatus)?"已装车":["7"].includes(null==(d=c.record)?void 0:d.Weightedstatus)?"已出厂":["8"].includes(null==(i=c.record)?void 0:i.Weightedstatus)?"已完成":["9"].includes(null==(s=c.record)?void 0:s.Weightedstatus)?"已取消":void 0}));function s(){c.record.OnwayId&&c.record.Supplier&&e.index.navigateTo({url:`/pages/billDetail/billDetail?onwayId=${c.record.OnwayId}&supplyId=${c.record.Supplier.Id}`})}const l=e.ref();function u(){l.value.confirm({title:"确定取消该笔运单？",content:"取消前，建议您联系司机说明原因",cancelText:"再想想",confirmText:"取消运单",asyncClose:!0,async confirm(){try{await t.DisableOnwayEnt({onwayId:c.record.Id,supplyId:c.record.SupplyId,userId:o.getToken().userInfo.Id,userType:"owner"}),await e.index.showToast({title:"操作成功",icon:"none",complete(){setTimeout((()=>{d("success")}),1500)}}),l.value.close()}catch(r){l.value.closeLoading(),e.index.showToast({title:r.data,icon:"none"})}}})}function a(){var t,o,r,n;(null==(o=null==(t=c.record)?void 0:t.DriverEnt)?void 0:o.Mobile)&&e.index.makePhoneCall({phoneNumber:null==(n=null==(r=c.record)?void 0:r.DriverEnt)?void 0:n.Mobile})}function p(){l.value.confirm({title:"确认完成卸货？",content:"确认前，建议您联系司机了解情况",cancelText:"再想想",confirmText:"确认卸货",confirmBgColor:"var(--main-color)",asyncClose:!0,async confirm(){try{await t.UnloadConfirm({onwayId:c.record.Id,supplyId:c.record.SupplyId,userId:o.getToken().userInfo.Id,uType:"owner"}),await e.index.showToast({title:"操作成功",icon:"none",complete(){setTimeout((()=>{d("success")}),1500)}}),l.value.close()}catch(r){console.log("err",r),l.value.closeLoading(),e.index.showToast({title:r.data,icon:"none"})}}})}return(t,o)=>e.e({a:e.t(i.value),b:["0","1","2","3","4","5","6","7"].includes(c.record.Weightedstatus)?1:"",c:["8","9"].includes(c.record.Weightedstatus)?1:"",d:e.t(r.record.Materialname),e:["0","1","2","3","4","5","9"].includes(r.record.Weightedstatus)},["0","1","2","3","4","5","9"].includes(r.record.Weightedstatus)?{f:e.t(r.record.EstimiteWeight)}:{},{g:["6","7","8"].includes(r.record.Weightedstatus)},["6","7","8"].includes(r.record.Weightedstatus)?{h:e.t(r.record.WeightEnt?r.record.WeightEnt.Suttle:"")}:{},{i:e.f(11,((e,t,o)=>({}))),j:e.p({src:"/static/images/dot1.png",width:"16rpx",height:"16rpx",duration:0,"custom-style":{marginRight:"16rpx"}}),k:r.record.SupEnt&&r.record.SupEnt.City},r.record.SupEnt&&r.record.SupEnt.City?{l:e.t(r.record.SupEnt.City)}:{},{m:r.record.SupEnt&&r.record.SupEnt.Name},r.record.SupEnt&&r.record.SupEnt.Name?{n:e.t(r.record.SupEnt.Name)}:{},{o:e.p({plate:r.record.Carno,color:r.record.CarColor}),p:e.p({src:"/static/images/dot2.png",width:"16rpx",height:"16rpx",duration:0,"custom-style":{marginRight:"16rpx"}}),q:r.record.UnloadEnt&&r.record.UnloadEnt.City},r.record.UnloadEnt&&r.record.UnloadEnt.City?{r:e.t(r.record.UnloadEnt.City)}:{},{s:r.record.UnloadEnt&&r.record.UnloadEnt.PlaceName},r.record.UnloadEnt&&r.record.UnloadEnt.PlaceName?{t:e.t(r.record.UnloadEnt.PlaceName)}:{},{v:r.record.TaxPrice},r.record.TaxPrice?e.e({w:["0","1","2","3","4","5","9"].includes(c.record.Weightedstatus)},["0","1","2","3","4","5","9"].includes(c.record.Weightedstatus)?{x:e.t(r.record.EstimateAmount)}:{},{y:["6"].includes(c.record.Weightedstatus)},["6"].includes(c.record.Weightedstatus)?{z:e.t(r.record.RealAmount)}:{},{A:["7","8"].includes(c.record.Weightedstatus)},["7","8"].includes(c.record.Weightedstatus)?{B:e.p({color:"var(--red-color)",price:r.record.RealAmount})}:{}):{},{C:["0","1","2","3","4","5","6","7"].includes(c.record.Weightedstatus)},["0","1","2","3","4","5","6","7"].includes(c.record.Weightedstatus)?e.e({D:e.p({color:"var(--divider)",margin:"24rpx 0"}),E:["0","1"].includes(c.record.Weightedstatus)},["0","1"].includes(c.record.Weightedstatus)?{F:e.o(u),G:e.p({shape:"circle",text:"取消运单",color:"var(--page-bg)",customTextStyle:{color:"var(--content-color)",fontSize:"26rpx"},customStyle:{height:"32px"}}),H:e.o((()=>{}))}:{},{I:["0","1","2","3","4","5","6","7"].includes(c.record.Weightedstatus)},["0","1","2","3","4","5","6","7"].includes(c.record.Weightedstatus)?{J:e.o(a),K:e.p({shape:"circle",text:"呼叫司机",color:"var(--page-bg)",customTextStyle:{color:"var(--content-color)",fontSize:"26rpx"},customStyle:{height:"32px"}}),L:e.o((()=>{}))}:{},{M:["7"].includes(c.record.Weightedstatus)},["7"].includes(c.record.Weightedstatus)?{N:e.o(p),O:e.p({shape:"circle",text:"确认卸货",color:"linear-gradient( 270deg, #31CE57 0%, #07B130 100%);",customTextStyle:{fontSize:"26rpx"},customStyle:{height:"32px"}}),P:e.o((()=>{}))}:{}):{},{Q:e.o(s),R:e.sr(l,"c6ba1183-8",{k:"confirm"})})}},n=e._export_sfc(r,[["__scopeId","data-v-c6ba1183"]]);wx.createComponent(n);
