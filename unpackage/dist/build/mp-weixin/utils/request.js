"use strict";const e=require("../common/vendor.js"),t=require("./token.js"),r=require("../stores/user.js");var o=new(require("../js_sdk/luch-request/luch-request/core/Request.js").Request);o.config.timeout=6e4,o.config.baseURL="https://www.wnlsjc.com:8023",o.interceptors.request.use((e=>{var r;const o=t.getToken();return e.header={...e.header,Authorization:o?`Bearer ${o.token}`:"",ContentType:e.header["Content-Type"]?e.header["Content-Type"]:"application/json"},e.data={ownerUserId:(null==(r=null==o?void 0:o.userInfo)?void 0:r.Id)??"",...e.data},e})),o.interceptors.response.use((function(t){const o=r.useUserStore(),s=t.data.code;return 200===s?t.data.data:600!==s?Promise.reject(t.data):void e.index.showModal({title:"提示",content:"登录过期，请重新登陆",showCancel:!1,success(t){t.confirm&&(o.logout(),e.index.reLaunch({url:"/pages/index/index"}))}})})),exports.request=o;
